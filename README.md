# AI Realtime Translation Server

This is a Node.js server with WebSocket and proxy for OpenAI Realtime API.

## Структура проекта

```
ai-realtime-translation-server/
├── .env                    # Файл переменных окружения
├── .gitignore             # Список игнорируемых файлов для Git
├── ARCHITECTURE.md        # Документация по архитектуре приложения
├── CLIENT_SPECIFICATION.md # Спецификация клиентской части
├── FINAL_ARCHITECTURE.md  # Окончательная архитектура приложения
├── PWA_PLAN.md           # План реализации PWA
├── README.md             # Документация по запуску и использованию (этот файл)
├── SECURITY_MEASURES.md  # Меры безопасности
├── SERVER_SPECIFICATION.md # Спецификация серверной части
├── app.js                # Клиентский JavaScript код
├── index.html            # Главная HTML страница
├── manifest.json         # Манифест PWA
├── package.json          # Зависимости и скрипты проекта
├── server.js             # Основной серверный код
├── service-worker.js     # Service Worker для PWA
├── assets/
│   └── icons/            # Иконки приложения
│       ├── icon-192x192.png
│       ├── icon-192x192.svg
│       ├── icon-512x512.png
│       └── icon-512x512.svg
├── config/
│   └── server.config.js  # Конфигурация сервера
├── routes/
│   └── api.js            # API маршруты
└── utils/
    └── openai-proxy.js   # Прокси для OpenAI API
```

## Требования к окружению

- Node.js (версия 14 или выше)
- npm (устанавливается вместе с Node.js)

## Установка и запуск

### 1. Установка зависимостей

```bash
npm install
```

### 2. Настройка переменных окружения

Создайте файл `.env` в корне проекта и добавьте следующие переменные:

```
OPENAI_API_KEY=your_openai_api_key_here
PORT=3000
NODE_ENV=development
```

Замените `your_openai_api_key_here` на действительный API ключ от OpenAI.

### 3. Запуск сервера

```bash
npm start
```

Сервер запустится на порту 3000 (или на порту, указанном в переменной PORT).

### 4. Открытие в браузере

Откройте браузер и перейдите по адресу:
```
http://localhost:3000
```

## Использование приложения

### 1. Получение ID

При открытии приложения в браузере автоматически генерируется уникальный ID пользователя, который отображается в поле "Your ID". Вы можете скопировать этот ID, нажав кнопку "Copy".

### 2. Подключение к серверу

Нажмите кнопку "Connect" для подключения к серверу через WebSocket. После подключения вы увидите статус "Connected" и сможете начать звонок.

### 3. Начало разговора

- Выберите ваш язык и язык партнера из выпадающих списков
- Нажмите кнопку "Start Call" для начала звонка
- Приложение начнет захват аудио с микрофона и отправку его на сервер
- В реальной реализации сервер будет обрабатывать аудио через OpenAI Realtime API и возвращать переведенное аудио

### 4. Завершение разговора

Нажмите кнопку "Stop Call" для завершения звонка и отключения от сервера.

## Ограничения и особенности реализации

### Текущая реализация

1. **Заглушка для OpenAI Realtime API**: В текущей реализации присутствует заглушка для работы с OpenAI Realtime API. В файле `utils/openai-proxy.js` реализованы методы, но они не содержат полноценной интеграции с Realtime API.

2. **Архитектура**: Приложение использует WebSocket для передачи аудио данных между клиентами, но в текущей реализации нет полноценного механизма перевода в реальном времени.

3. **PWA функциональность**: Приложение включает манифест и service worker для работы как PWA, но кэширование ресурсов требует дополнительной настройки.

### Потенциальные ограничения

1. **Задержка передачи аудио**: Из-за архитектуры передачи через сервер и возможной обработки через OpenAI API могут возникать задержки.

2. **Качество перевода**: Качество перевода зависит от возможностей OpenAI API и может варьироваться в зависимости от языков и сложности речи.

3. **Ограничения API**: OpenAI Realtime API может иметь ограничения на количество запросов, длительность сессий и объем передаваемых данных.

4. **Совместимость браузеров**: Некоторые функции (например, MediaRecorder API) могут не поддерживаться в старых браузерах.

### Требуемая доработка

Для полноценной работы приложения требуется реализовать:

1. Интеграцию с OpenAI Realtime API для обработки аудио в реальном времени
2. Механизм прямого перевода аудио между языками
3. Оптимизацию передачи аудио данных для снижения задержки
4. Добавление WebRTC для прямой передачи аудио между клиентами