# Архитектура приложения для перевода голоса в реальном времени

## Структура проекта

```
voice-translation-app/
├── README.md
├── ARCHITECTURE.md
├── package.json
├── .env
├── .gitignore
├── server.js                 # Основной сервер Node.js с WebSocket
├── config/
│   └── server.config.js      # Конфигурация сервера
├── public/
│   ├── index.html           # Главная страница приложения
│   ├── css/
│   │   └── style.css        # Стили интерфейса
│   ├── js/
│   │   ├── main.js          # Основной клиентский скрипт
│   │   ├── webrtc.js        # Логика WebRTC соединений
│   │   └── websocket.js     # Обработка WebSocket соединений
│   └── assets/
│       ├── icons/           # Иконки интерфейса
│       └── sounds/          # Звуковые эффекты
├── routes/
│   └── api.js               # Маршруты API
└── utils/
    ├── openai-proxy.js      # Прокси для OpenAI API
    └── helpers.js           # Вспомогательные функции
```

## Описание компонентов

### Серверная часть (Node.js)

- **server.js**: Основной файл сервера на Express.js с WebSocket поддержкой
- **routes/api.js**: API маршруты для обработки запросов клиента
- **utils/openai-proxy.js**: Прокси-сервер для взаимодействия с OpenAI Realtime API
- **config/server.config.js**: Конфигурационные параметры сервера

### Клиентская часть (HTML/CSS/JS)

- **public/index.html**: Основной HTML шаблон приложения
- **public/css/style.css**: Стили пользовательского интерфейса
- **public/js/main.js**: Центральная логика приложения
- **public/js/webrtc.js**: Реализация WebRTC соединений
- **public/js/websocket.js**: Обработка WebSocket соединений

### Безопасность

- API ключи OpenAI хранятся на сервере в переменных окружения
- Все запросы к API проходят через серверный прокси
- Валидация и ограничение запросов на стороне сервера

## Поток данных

1. Клиент запускает захват аудио через WebRTC
2. Аудио данные передаются через WebRTC соединение
3. Сервер получает аудио и отправляет его в OpenAI Realtime API
4. Переведенный текст возвращается от OpenAI через серверный прокси
5. Переведенный текст отправляется второму клиенту через WebSocket
6. Второй клиент воспроизводит переведенный текст как аудио

## Технологии

- **WebRTC**: Для передачи аудио потока между клиентами
- **WebSocket**: Для установления соединения между клиентами через сервер
- **OpenAI Realtime API**: Для перевода голоса в реальном времени
- **Node.js**: Для серверной логики и прокси к OpenAI API
- **Express.js**: Для создания веб-сервера
- **PWA**: Для возможности оффлайн использования